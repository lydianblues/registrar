<div class="card top-card">
  
  <div class="card-header">
    <div style="float:left;"><h2>Facilitators</h2></div>
    <div style="float:right;">
      <%= link_to 'New Facilitator', new_facilitator_path, class: 'btn btn-primary btn-md' %>
    </div>
  </div>

  <div class="card-body">

    <div class="table-responsive">
      <table id="facilitators-table" class="table table-striped table-sm table-hover table-bordered">

        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th colspan="2"></th>
          </tr>
        </thead>

        <tbody>
          <% @facilitators.each do |facilitator| %>
            <tr>
              <td><%= link_to facilitator.name, facilitator %></td>
              <td><%= facilitator.description %></td>
              <td><%= link_to 'Edit', edit_facilitator_path(facilitator),
                class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to 'Delete', facilitator, class: 'btn btn-sm btn-danger', 
                method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>

$('#facilitators-table').dataTable( {
  processing: true,
  serverSide: true,
  ajax: {
    url: '/facilitators/datatables',
    processing: true,
    serverSide: true
  },
  columns: [
    {data: 'full_name'},
    {data: 'wp_email'},
    {data: 'occupation'},
    {data: 'organization'},
    {data: 'edit_button', orderable: false, searchable: false },
    {data: 'delete_button', orderable: false, searchable: false }
  ],

} );

</script>
