<div class="card top-card">

    <div class="card-header">
       <h2>Registration Details</h2>
    </div>

    <div class="card-body" style="padding:1em;">

        <p>
            <strong>Code:</strong>
            <%= @registration.code %>
        </p
        <p>
          <strong>Course:</strong>
          <%= link_to @registration.training.course.name, @registration.training.course %>
        </p>
        <p>
          <strong>Training:</strong>
          <%= link_to @registration.training.code, @registration.training %>
        <p/>
        <p>
          <strong>Owner:</strong>
          <%= link_to @registration.owner.wp_first_name + " " +
            @registration.owner.wp_last_name, @registration.owner %>
        </p>
        <p>
          <strong>Registrant:</strong>              
          <%= link_to @registration.registerable.handle,
            @registration.registerable %>
        </p>

        <p>
          <strong>Paid:</strong>
          <%= @registration.paid_for ? "yes" : "no" %>
        </p>

        <p>
          <strong>Updated:</strong>
          <%= @registration.updated_at.strftime("%b %-d, %Y") %>
        </p>

    </div>
</div>

<% content_for :wide_table  do %>
    <div class="card">
        <div class="card-header">
            <div style="float:left;"><h2>Transactions for this Registration</h2></div>
        </div>

        <div class="card-body">

            <div class="table-responsive">
              <table class="table table-striped table-sm table-hover table-bordered">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Status</th>
                    <th>Owner</th>
                    <th>Payer</th>
                    <th>Amount</th>
                  </tr>
                </thead>
                <tbody>
                    <% @registration.transactions.each do |t| %>
                        <tr>
                            <td><%= link_to t.transaction_id, transaction_path(t.id) %></td>
                            <td><%= t.status %></td>
                            <td><%= link_to t.owner.handle, t.owner %></td>
                            <td>
                                <% if t.payer_first_name.blank?  || t.payer_last_name.blank? %>
                                    Unspecified
                                <% else %>
                                    <%= t.payer_first_name + " " + t.payer_last_name %>
                                <% end %>
                            </td>
                            <td><%= format("$%.2f", t.amount) %></td>
                        </tr>
                    <% end %>
                </tbody>
              </table>
            </div>
        </div>
    </div>
<% end %>
