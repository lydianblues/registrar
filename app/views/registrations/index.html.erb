<h1>Registrations</h1>
<div class="panel panel-default">
  <div class="panel-body">
    Note that the Group name is a combination of the last name of the 
    group leader and group tag, separated
    by a dollar sign.
  </div>
</div>
<div class="table-responsive">
  <table class="table table-striped table-condensed table-hover">
    <thead>
      <tr>
        <th>Code</th>
        <th>Student Name</th>
        <th>Group Name</th>
        <th>Last Update</th>
        <th colspan="2"></th>
      </tr>
    </thead>

    <tbody>
      <% @registrations.each do |registration| %>
        <tr>
          <td><%= link_to registration.code, registration %></td>
          
          <% if registration.registerable_type == "Student" %>
          <td><%= link_to registration.registerable.first_name + " " +
            registration.registerable.last_name, registration.registerable %></td>
          <td/>
          <% end %>

          <% if registration.registerable_type == "Group" %>
            <td/>
            <td><%= link_to registration.registerable.leader_last + '$' +
              registration.registerable.tag, registration.registerable %>
            </td>
          <% end %>

          <td><%= registration.updated_at.strftime("%b %-d, %Y") %></td>

          <td><%= link_to 'Edit', edit_registration_path(registration),
            class: 'btn btn-primary btn-xs' %></td>
          <td><%= link_to 'Delete', registration, class: 'btn btn-xs btn-danger', 
            method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<%= link_to 'New registration', new_registration_path, class: 'btn btn-primary btn-sm' %>